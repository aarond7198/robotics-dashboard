<!DOCTYPE html>
<html>
<head>
  <title>Google Sheets API Debug Test</title>
  <script>
    console.log("ğŸ§ª Script loaded...");

    const CLIENT_ID = "714659777422-2sal3s5etmbins8qqull5019mn9e7tnl.apps.googleusercontent.com";
    const SCOPES = "https://www.googleapis.com/auth/spreadsheets.readonly";
    const SHEET_ID = "1tlG9DzmSRHmPu8Qo4Xd6TFStIhbeM4dTsFb7OvycR3M";

    let tokenClient;

function loadSheet() {
  console.log("ğŸ“¥ Attempting to fetch Google Sheet...");
  gapi.client.sheets.spreadsheets.values.get({
    spreadsheetId: SHEET_ID,
    range: "Sheet1"
  }).then(response => {
    console.log("âœ… Raw response object:", response);
    const data = response.result?.values;
    if (data && data.length) {
      console.log("ğŸ“Š Sheet rows:", data);
      alert(`âœ… Loaded ${data.length - 1} rows.`);
    } else {
      console.warn("âš ï¸ Sheet returned no values.");
      alert("âš ï¸ Sheet is connected but contains no visible data.");
    }
  }).catch(error => {
    console.error("âŒ Error loading sheet:", error);
    alert("âŒ Error loading sheet. Check console.");
  });
}


    function init() {
      console.log("ğŸš€ gapi loaded, initializing...");
      gapi.load("client", async () => {
        await gapi.client.init({});
        console.log("âœ… gapi client initialized");

        tokenClient = google.accounts.oauth2.initTokenClient({
          client_id: CLIENT_ID,
          scope: SCOPES,
          callback: (tokenResponse) => {
            console.log("ğŸ” Token received:", tokenResponse);
            loadSheet();
          }
        });

        document.getElementById("loginBtn").disabled = false;
      });
    }

    function requestAccess() {
      console.log("ğŸ”“ Requesting access token...");
      tokenClient.requestAccessToken();
    }
  </script>
  <script src="https://apis.google.com/js/api.js" onload="init()"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <h1>ğŸ” Sheets API Debug Test</h1>
  <p>If you see nothing in the console, the scripts aren't running!</p>
  <button id="loginBtn" onclick="requestAccess()" disabled>ğŸ” Login and Load Sheet</button>

  <style>
    body { font-family: sans-serif; padding: 40px; }
    button { font-size: 1.2rem; padding: 10px 20px; }
  </style>
</body>
</html>
